<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>JSë¹„ë™ê¸° : 4. Async / Await ì‚¬ìš©ë²•</title>
        <script>
            console.log("%cğŸ‘§ğŸšª","font-size:100px")
         /******************************************************************* 
              [Async/Awaitë€? "ì•½ì†ì„ ì¢€ ë” ì‰½ê²Œ!"]

               1. asyncëŠ” í•¨ìˆ˜ê°€ Promiseë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•œë‹¤!
               2. awaitëŠ” í•¨ìˆ˜ê°€ Promiseë¥¼ ê¸°ë‹¤ë¦¬ê²Œ ì„¤ì •í•œë‹¤!

              [ async êµ¬ë¬¸ ì‚¬ìš©ë²• ]
               ___________________________________

               -> í•¨ìˆ˜ì•ì— async í‚¤ì›Œë“œë¥¼ ì¨ì¤€ë‹¤!
               ___________________________________

               async function ë‚´í•¨ìˆ˜() {
                    return "ìš°ë¦¬ì§€ê¸ˆë§Œë‚˜!";
                }
                ____________________________________

                -> ìœ„ì˜ ì½”ë“œëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ë™ì¼í•˜ë‹¤!
                ____________________________________

                function ë‚´í•¨ìˆ˜() {
                    return Promise.resolve("ìš°ë¦¬ì§€ê¸ˆë§Œë‚˜!");
                }
                _______________________________________________________

                -> asyncí‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ í•¨ìˆ˜í˜¸ì¶œì½”ë“œ ë’¤ì— 
                .thenì„ ì‚¬ìš©í•˜ì—¬
                   ì„±ê³µì‹œ/ì‹¤íŒ¨ì‹œì½”ë“œë¥¼ ì‘ì„±í•œë‹¤!
                _______________________________________________________

                ë‚´í•¨ìˆ˜().then(
                    function(value) { ì„±ê³µì‹œì½”ë“œ },
                    function(error) { ì‹¤íŒ¨ì‹œì½”ë“œ }
                );
                ____________________________________
                *********************
                [ await êµ¬ë¬¸ ì‚¬ìš©ë²• ]
               ___________________________________

               -> awaití‚¤ì›Œë“œëŠ” 
                    asyncí•¨ìˆ˜ ë‚´ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•¨.
                -> awaití‚¤ì›Œë“œ ëŠ” 
                    í•¨ìˆ˜ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í•˜ê³  ê³„ì†í•˜ê¸° 
                    ì „ì— Promiseì˜ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¼
               ___________________________________

               async function ë³´ì—¬ì¤˜() {
                let ë‚´ì•½ì† = new Promise(function(ì„±ê³µí•¨ìˆ˜) {
                        ì„±ê³µí•¨ìˆ˜("ë‚´ë©”ì„¸ì§€");
                    });
                    document.getElementById("mydiv").innerHTML = await ë‚´ì•½ì†;
                }

                ë³´ì—¬ì¤˜();
                ___________________________________

                ((ë‹¨ì–´ëœ»))
                * resolve í•´ê²°í•˜ë‹¤
                * asynchronous ë™ì‹œì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”
                * await ê¸°ë‹¤ë¦¬ë‹¤
         *******************************************************************/
            function code(a) {
                document.querySelector('#show').innerHTML+=a+'<br>'
            }
            async function show() {
                const wait=new Promise((resolve) => {
                    setTimeout(() => {
                        resolve('manage the door')
                    }, 3000);
                })
                code(await wait)//Promise obj use await returning resolve first and then next things are valid
                code(`<img src="https://cdn.hankooki.com/news/photo/202304/67837_90529_1680302888.jpg" style="height:70vh" alt="ìŠ¤ì¦ˆë©”ì˜ ë¬¸ë‹¨ì†">`)//await was already used so don't need to use it here
            }
            show()
            async function file() {
                const file=new Promise((resolve) => {
                const ajas=new XMLHttpRequest()
                ajas.open('get','https://koreascience.kr/article/JAKO201812055796720.pdf')
                ajas.onload=function(){
                    // console.log(ajas.status,this)
                    if (ajas.status==200) {
                        resolve(ajas.responseURL)
                    }
                }
                ajas.send()
            })
            const text=(a)=>{
                // console.log(a)
                document.querySelector('#doc').innerHTML=`<iframe src="${a}" style="width:100%;border:none;height:100%"></iframe>`
            }
            text(await file)
            }
            file()
        </script>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap");
            body {
                background-image: linear-gradient(to bottom, #494949, gray);
                background-repeat: no-repeat;
                background-attachment: fixed;
                text-align: center;
            }
            #show {
                font-family: "Gamja Flower", cursive;
                font-size: 4vw;
                background-image: linear-gradient(to bottom, lightgreen, pink, orangered, aquamarine);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-repeat: no-repeat;
                font-weight: bold;
            }
            #doc{
                width: 50%;
                height: 50vh;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <div id="show"></div>
        <div id="doc"></div>
    </body>
</html>
